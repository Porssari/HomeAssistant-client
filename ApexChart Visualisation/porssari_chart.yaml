type: custom:apexcharts-card
graph_span: 48h
show:
  last_updated: true
experimental:
  color_threshold: true
span:
  start: day
now:
  show: true
  label: Nyt
header:
  show: true
  title: Pörssäri sähkön hinta
  show_states: true
yaxis:
  - min: ~0
    max: ~10
    decimals: 2
series:
  - entity: sensor.porssari_json_data
    show:
      in_header: true
      extremas: false
      legend_value: false
    type: column
    color: lightgray
    float_precision: 2
    unit: snt/kWh
    data_generator: |
      let res = [];
      for (const [key, value] of Object.entries(entity.attributes.Prices)) {
        let d = new Date(key).getTime();
        if (d > 0)
          res.push([d, value.Price]);
      }
      return res.sort((a, b) => { return a[0] - b[0] });
    color_threshold:
      - value: 0
        color: 368f39
      - value: 10
        color: a3b34d
      - value: 20
        color: ffd57e
      - value: 30
        color: f18c56
      - value: 40
        color: de425b
